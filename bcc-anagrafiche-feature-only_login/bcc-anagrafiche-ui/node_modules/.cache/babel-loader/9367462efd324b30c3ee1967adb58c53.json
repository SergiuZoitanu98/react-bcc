{"ast":null,"code":"import _defineProperty from \"C:\\\\Users\\\\Gigabyte\\\\Desktop\\\\react-bcc\\\\react-bcc\\\\bcc-anagrafiche-feature-only_login\\\\bcc-anagrafiche-ui\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"C:\\\\Users\\\\Gigabyte\\\\Desktop\\\\react-bcc\\\\react-bcc\\\\bcc-anagrafiche-feature-only_login\\\\bcc-anagrafiche-ui\\\\src\\\\anagrafica_components\\\\RicercaClienti.jsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { Component } from \"react\";\nimport { Modal, Button } from \"react-bootstrap\";\nimport Navbar from \"./common/Navbar\";\nimport axios from \"axios\";\nimport UserTable from \"./userTable\";\nimport UserForm from \"./userForm\";\nimport UnconfirmedModalBody from \"./unconfiremdModalBody\";\nimport config from \"../config.json\";\nexport class RicercaClienti extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      modalDetailsVisible: false,\n      modalDetailsUncofirmed: false,\n      modalAlreadyConfirmed: false,\n      modalUnconfirmed: false,\n      clients: [],\n      selectedClient: null,\n      checked: false,\n      filiali: []\n    };\n\n    this.handleRicerca = data => {\n      const jwt = localStorage.getItem(\"TOKEN\");\n      const conf = {\n        headers: {\n          Authorization: \"Bearer \" + jwt\n        },\n        params: data\n      };\n      axios.get(config.apiClienteEndpoint, conf).then(response => {\n        var date = new Date(response.data[0].filiali.lastModify);\n        response.data[0].filiali.lastModify = date.getFullYear() + \"-\" + (date.getMonth() + 1) + \"-\" + date.getDate(); //da togliere stati duplicati\n\n        this.setState({\n          clients: []\n        });\n        this.setState({\n          clients: response.data\n        });\n        console.log(this.state.clients);\n      }).catch(error => {\n        // handle error\n        console.log(error);\n      });\n    };\n\n    this.handleModalDetailsUncofirmed = () => {\n      this.setState({\n        modalDetailsUncofirmed: !this.state.modalDetailsUncofirmed\n      });\n    };\n\n    this.handleDetailsModalVisible = () => {\n      this.setState({\n        modalDetailsVisible: !this.state.modalDetailsVisible\n      });\n    };\n\n    this.handleUnconfirmed = () => {\n      this.setState({\n        modalAlreadyConfirmed: this.state.modalAlreadyConfirmed\n      });\n    };\n\n    this.handleModalAlreadyConfirmed = () => {\n      this.setState({\n        modalAlreadyConfirmed: !this.state.modalAlreadyConfirmed\n      });\n    };\n\n    this.handleModalUnconfirmed = () => {\n      this.setState({\n        modalUnconfirmed: !this.state.modalUnconfirmed\n      });\n    };\n\n    this.checkClient = client => {\n      this.setState({\n        selectedClient: client\n      });\n\n      if (client.confermato) {\n        this.setState({\n          modalAlreadyConfirmed: true\n        });\n      } else {\n        this.setState({\n          modalUnconfirmed: true\n        });\n      }\n    };\n\n    this.handleChange = (input, isCheckbox) => {\n      const client = _objectSpread({}, this.state.selectedClient);\n\n      console.log(input.name);\n\n      if (isCheckbox) {\n        client[input.name] = input.checked;\n      } else {\n        client[input.name] = input.value;\n      }\n\n      console.log(client);\n      this.setState({\n        selectedClient: client\n      });\n    };\n  }\n\n  render() {\n    return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n      id: \"main\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, React.createElement(Navbar, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }), React.createElement(\"h3\", {\n      className: \" mt-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, \"RICERCA CLIENTI\"), React.createElement(UserForm, {\n      handleRicerca: this.handleRicerca,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }), this.state.clients.length > 0 && React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, React.createElement(UserTable, {\n      checkClient: this.checkClient,\n      clients: this.state.clients,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    })), React.createElement(Modal, {\n      show: this.state.modalAlreadyConfirmed,\n      onHide: this.handleModalAlreadyConfirmed,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, React.createElement(Modal.Header, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, \" \", React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, \"Attenzione!\")), React.createElement(Modal.Body, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, \"L'anagrafica del cliente \\xE8 gi\\xE0 stata confermata in data:\", React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, this.state.selectedClient && this.state.selectedClient.filiali.lastModify)), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, \"Il codice identificativo assegnato \\xE8:\", React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, \" \", this.state.selectedClient && this.state.selectedClient.codice))), React.createElement(Modal.Footer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, React.createElement(Button, {\n      variant: \"secondary\",\n      onClick: this.handleModalAlreadyConfirmed,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, \"Close\"))), React.createElement(Modal, {\n      show: this.state.modalUnconfirmed,\n      onHide: this.handleModalUnconfirmed,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }, React.createElement(Modal.Header, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }, \" \", React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }, \"Non Confermato!\")), React.createElement(Modal.Body, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, this.state.selectedClient && React.createElement(\"form\", {\n      action: this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"container-fluid\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, React.createElement(\"h5\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, \"NAG\"), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, this.state.selectedClient.nag), React.createElement(\"h5\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }, \"Nome di battesimo\"), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, \" \", this.state.selectedClient.nome), React.createElement(\"h5\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, \"Data di nascita\"), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, \" \", this.state.selectedClient.dataNascita), React.createElement(\"div\", {\n      className: \"form-check form-check-wrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      className: \"form-check-input \",\n      type: \"text\",\n      value: this.state.selectedClient.telefono,\n      id: \"telefono\",\n      name: \"telefono\",\n      onChange: e => {\n        this.handleChange(e.currentTarget);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      className: \"form-check-label\",\n      htmlFor: \"telefono\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }, React.createElement(\"h5\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, \"Numero di telefono\"), this.state.selectedClient.telefono)), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"form-check form-check-wrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      className: \"form-check-input\",\n      type: \"email\",\n      value: this.state.selectedClient.email,\n      id: \"email\",\n      name: \"email\",\n      onChange: e => {\n        this.handleChange(e.currentTarget);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      className: \"form-check-label\",\n      htmlFor: \"email\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195\n      },\n      __self: this\n    }, React.createElement(\"h5\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    }, \"Email\"), this.state.selectedClient.email)), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200\n      },\n      __self: this\n    }), React.createElement(\"h5\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201\n      },\n      __self: this\n    }, \"Privacy\"), [1, 2, 3, 4, 5, 6, 7].map(privacyNumber => {\n      return React.createElement(\"div\", {\n        key: privacyNumber,\n        className: \"form-check form-check-wrapper\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        className: \"form-check-input\",\n        type: \"checkbox\",\n        id: \"id-\".concat(privacyNumber),\n        name: \"p\".concat(privacyNumber),\n        checked: this.state.selectedClient[\"p\".concat(privacyNumber)] ? \"checked\" : \"\",\n        onChange: e => {\n          this.handleChange(e.currentTarget, true);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        className: \"form-check-label\",\n        htmlFor: \"p1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222\n        },\n        __self: this\n      }, \"Privacy \", privacyNumber));\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228\n      },\n      __self: this\n    }))))), React.createElement(Modal.Footer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234\n      },\n      __self: this\n    }, React.createElement(Button, {\n      variant: \"secondary\",\n      onClick: this.handleModalUnconfirmed,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235\n      },\n      __self: this\n    }, \"Close\"), React.createElement(Button, {\n      variant: \"secondary\",\n      onClick: this.handleModalUnconfirmed,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238\n      },\n      __self: this\n    }, \"Conferma\"))), React.createElement(Modal, {\n      show: this.state.confirmCheckModalShow,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243\n      },\n      __self: this\n    }, React.createElement(Modal.Header, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244\n      },\n      __self: this\n    }, \" \", React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246\n      },\n      __self: this\n    }, \"Non Confermato!\")), React.createElement(Modal.Body, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249\n      },\n      __self: this\n    }, \"Sicuro di confermare?\")), React.createElement(Modal.Footer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251\n      },\n      __self: this\n    }, React.createElement(Button, {\n      variant: \"secondary\",\n      onClick: e => {\n        this.setState({\n          confirmCheckModalShow: false\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252\n      },\n      __self: this\n    }, \"Close\"), React.createElement(Button, {\n      variant: \"primary\",\n      onClick: e => {\n        this.setState({\n          confirmCheckModalShow: false\n        });\n        this.handleConfirm();\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260\n      },\n      __self: this\n    }, \"Conferma\")))));\n  }\n\n}","map":{"version":3,"sources":["C:\\Users\\Gigabyte\\Desktop\\react-bcc\\react-bcc\\bcc-anagrafiche-feature-only_login\\bcc-anagrafiche-ui\\src\\anagrafica_components\\RicercaClienti.jsx"],"names":["React","Component","Modal","Button","Navbar","axios","UserTable","UserForm","UnconfirmedModalBody","config","RicercaClienti","state","modalDetailsVisible","modalDetailsUncofirmed","modalAlreadyConfirmed","modalUnconfirmed","clients","selectedClient","checked","filiali","handleRicerca","data","jwt","localStorage","getItem","conf","headers","Authorization","params","get","apiClienteEndpoint","then","response","date","Date","lastModify","getFullYear","getMonth","getDate","setState","console","log","catch","error","handleModalDetailsUncofirmed","handleDetailsModalVisible","handleUnconfirmed","handleModalAlreadyConfirmed","handleModalUnconfirmed","checkClient","client","confermato","handleChange","input","isCheckbox","name","value","render","length","codice","handleSubmit","nag","nome","dataNascita","telefono","e","currentTarget","email","map","privacyNumber","confirmCheckModalShow","handleConfirm"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,KAAT,EAAgBC,MAAhB,QAA8B,iBAA9B;AACA,OAAOC,MAAP,MAAmB,iBAAnB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,SAAP,MAAsB,aAAtB;AACA,OAAOC,QAAP,MAAqB,YAArB;AACA,OAAOC,oBAAP,MAAiC,wBAAjC;AACA,OAAOC,MAAP,MAAmB,gBAAnB;AACA,OAAO,MAAMC,cAAN,SAA6BT,SAA7B,CAAuC;AAAA;AAAA;AAAA,SAC5CU,KAD4C,GACpC;AACNC,MAAAA,mBAAmB,EAAE,KADf;AAENC,MAAAA,sBAAsB,EAAE,KAFlB;AAGNC,MAAAA,qBAAqB,EAAE,KAHjB;AAINC,MAAAA,gBAAgB,EAAE,KAJZ;AAKNC,MAAAA,OAAO,EAAE,EALH;AAMNC,MAAAA,cAAc,EAAE,IANV;AAONC,MAAAA,OAAO,EAAE,KAPH;AAQNC,MAAAA,OAAO,EAAE;AARH,KADoC;;AAAA,SAY5CC,aAZ4C,GAY3BC,IAAD,IAAU;AACxB,YAAMC,GAAG,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAZ;AACA,YAAMC,IAAI,GAAG;AACXC,QAAAA,OAAO,EAAE;AACPC,UAAAA,aAAa,EAAE,YAAYL;AADpB,SADE;AAIXM,QAAAA,MAAM,EAAEP;AAJG,OAAb;AAMAhB,MAAAA,KAAK,CACFwB,GADH,CACOpB,MAAM,CAACqB,kBADd,EACkCL,IADlC,EAEGM,IAFH,CAESC,QAAD,IAAc;AAClB,YAAIC,IAAI,GAAG,IAAIC,IAAJ,CAASF,QAAQ,CAACX,IAAT,CAAc,CAAd,EAAiBF,OAAjB,CAAyBgB,UAAlC,CAAX;AACAH,QAAAA,QAAQ,CAACX,IAAT,CAAc,CAAd,EAAiBF,OAAjB,CAAyBgB,UAAzB,GACEF,IAAI,CAACG,WAAL,KACA,GADA,IAECH,IAAI,CAACI,QAAL,KAAkB,CAFnB,IAGA,GAHA,GAIAJ,IAAI,CAACK,OAAL,EALF,CAFkB,CAQlB;;AACA,aAAKC,QAAL,CAAc;AAAEvB,UAAAA,OAAO,EAAE;AAAX,SAAd;AACA,aAAKuB,QAAL,CAAc;AAAEvB,UAAAA,OAAO,EAAEgB,QAAQ,CAACX;AAApB,SAAd;AACAmB,QAAAA,OAAO,CAACC,GAAR,CAAY,KAAK9B,KAAL,CAAWK,OAAvB;AACD,OAdH,EAeG0B,KAfH,CAeUC,KAAD,IAAW;AAChB;AACAH,QAAAA,OAAO,CAACC,GAAR,CAAYE,KAAZ;AACD,OAlBH;AAmBD,KAvC2C;;AAAA,SAyC5CC,4BAzC4C,GAyCb,MAAM;AACnC,WAAKL,QAAL,CAAc;AACZ1B,QAAAA,sBAAsB,EAAE,CAAC,KAAKF,KAAL,CAAWE;AADxB,OAAd;AAGD,KA7C2C;;AAAA,SA+C5CgC,yBA/C4C,GA+ChB,MAAM;AAChC,WAAKN,QAAL,CAAc;AAAE3B,QAAAA,mBAAmB,EAAE,CAAC,KAAKD,KAAL,CAAWC;AAAnC,OAAd;AACD,KAjD2C;;AAAA,SAmD5CkC,iBAnD4C,GAmDxB,MAAM;AACxB,WAAKP,QAAL,CAAc;AAAEzB,QAAAA,qBAAqB,EAAE,KAAKH,KAAL,CAAWG;AAApC,OAAd;AACD,KArD2C;;AAAA,SAuD5CiC,2BAvD4C,GAuDd,MAAM;AAClC,WAAKR,QAAL,CAAc;AAAEzB,QAAAA,qBAAqB,EAAE,CAAC,KAAKH,KAAL,CAAWG;AAArC,OAAd;AACD,KAzD2C;;AAAA,SA2D5CkC,sBA3D4C,GA2DnB,MAAM;AAC7B,WAAKT,QAAL,CAAc;AAAExB,QAAAA,gBAAgB,EAAE,CAAC,KAAKJ,KAAL,CAAWI;AAAhC,OAAd;AACD,KA7D2C;;AAAA,SA+D5CkC,WA/D4C,GA+D7BC,MAAD,IAAY;AACxB,WAAKX,QAAL,CAAc;AAAEtB,QAAAA,cAAc,EAAEiC;AAAlB,OAAd;;AACA,UAAIA,MAAM,CAACC,UAAX,EAAuB;AACrB,aAAKZ,QAAL,CAAc;AAAEzB,UAAAA,qBAAqB,EAAE;AAAzB,SAAd;AACD,OAFD,MAEO;AACL,aAAKyB,QAAL,CAAc;AAAExB,UAAAA,gBAAgB,EAAE;AAApB,SAAd;AACD;AACF,KAtE2C;;AAAA,SAwE5CqC,YAxE4C,GAwE7B,CAACC,KAAD,EAAQC,UAAR,KAAuB;AACpC,YAAMJ,MAAM,qBAAQ,KAAKvC,KAAL,CAAWM,cAAnB,CAAZ;;AACAuB,MAAAA,OAAO,CAACC,GAAR,CAAYY,KAAK,CAACE,IAAlB;;AACA,UAAID,UAAJ,EAAgB;AACdJ,QAAAA,MAAM,CAACG,KAAK,CAACE,IAAP,CAAN,GAAqBF,KAAK,CAACnC,OAA3B;AACD,OAFD,MAEO;AACLgC,QAAAA,MAAM,CAACG,KAAK,CAACE,IAAP,CAAN,GAAqBF,KAAK,CAACG,KAA3B;AACD;;AACDhB,MAAAA,OAAO,CAACC,GAAR,CAAYS,MAAZ;AACA,WAAKX,QAAL,CAAc;AAAEtB,QAAAA,cAAc,EAAEiC;AAAlB,OAAd;AACD,KAlF2C;AAAA;;AAmF5CO,EAAAA,MAAM,GAAG;AACP,WACE,0CACE;AAAK,MAAA,EAAE,EAAC,MAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAEE;AAAI,MAAA,SAAS,EAAC,OAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAFF,EAGE,oBAAC,QAAD;AAAU,MAAA,aAAa,EAAE,KAAKrC,aAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHF,EAKG,KAAKT,KAAL,CAAWK,OAAX,CAAmB0C,MAAnB,GAA4B,CAA5B,IACC;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,SAAD;AACE,MAAA,WAAW,EAAE,KAAKT,WADpB;AAEE,MAAA,OAAO,EAAE,KAAKtC,KAAL,CAAWK,OAFtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CANJ,EAcE,oBAAC,KAAD;AACE,MAAA,IAAI,EAAE,KAAKL,KAAL,CAAWG,qBADnB;AAEE,MAAA,MAAM,EAAE,KAAKiC,2BAFf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAIE,oBAAC,KAAD,CAAO,MAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,GADH,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAFF,CAJF,EAQE,oBAAC,KAAD,CAAO,IAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yEAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,KAAKpC,KAAL,CAAWM,cAAX,IACC,KAAKN,KAAL,CAAWM,cAAX,CAA0BE,OAA1B,CAAkCgB,UAFtC,CAFF,CADF,EAQE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mDAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,GADH,EAEG,KAAKxB,KAAL,CAAWM,cAAX,IACC,KAAKN,KAAL,CAAWM,cAAX,CAA0B0C,MAH9B,CAFF,CARF,CARF,EAyBE,oBAAC,KAAD,CAAO,MAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,MAAD;AACE,MAAA,OAAO,EAAC,WADV;AAEE,MAAA,OAAO,EAAE,KAAKZ,2BAFhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADF,CAzBF,CAdF,EAmDE,oBAAC,KAAD;AACE,MAAA,IAAI,EAAE,KAAKpC,KAAL,CAAWI,gBADnB;AAEE,MAAA,MAAM,EAAE,KAAKiC,sBAFf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAIE,oBAAC,KAAD,CAAO,MAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,GADH,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAFF,CAJF,EAQE,oBAAC,KAAD,CAAO,IAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,KAAKrC,KAAL,CAAWM,cAAX,IACC;AAAM,MAAA,MAAM,EAAE,KAAK2C,YAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAI,KAAKjD,KAAL,CAAWM,cAAX,CAA0B4C,GAA9B,CAFF,EAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BAHF,EAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAK,KAAKlD,KAAL,CAAWM,cAAX,CAA0B6C,IAA/B,CAJF,EAKE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBALF,EAME;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAK,KAAKnD,KAAL,CAAWM,cAAX,CAA0B8C,WAA/B,CANF,EAQE;AAAK,MAAA,SAAS,EAAC,+BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AACE,MAAA,SAAS,EAAC,mBADZ;AAEE,MAAA,IAAI,EAAC,MAFP;AAGE,MAAA,KAAK,EAAE,KAAKpD,KAAL,CAAWM,cAAX,CAA0B+C,QAHnC;AAIE,MAAA,EAAE,EAAC,UAJL;AAKE,MAAA,IAAI,EAAC,UALP;AAME,MAAA,QAAQ,EAAGC,CAAD,IAAO;AACf,aAAKb,YAAL,CAAkBa,CAAC,CAACC,aAApB;AACD,OARH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAWE;AAAO,MAAA,SAAS,EAAC,kBAAjB;AAAoC,MAAA,OAAO,EAAC,UAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BADF,EAEG,KAAKvD,KAAL,CAAWM,cAAX,CAA0B+C,QAF7B,CAXF,CARF,EAwBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAxBF,EAyBE;AAAK,MAAA,SAAS,EAAC,+BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AACE,MAAA,SAAS,EAAC,kBADZ;AAEE,MAAA,IAAI,EAAC,OAFP;AAGE,MAAA,KAAK,EAAE,KAAKrD,KAAL,CAAWM,cAAX,CAA0BkD,KAHnC;AAIE,MAAA,EAAE,EAAC,OAJL;AAKE,MAAA,IAAI,EAAC,OALP;AAME,MAAA,QAAQ,EAAGF,CAAD,IAAO;AACf,aAAKb,YAAL,CAAkBa,CAAC,CAACC,aAApB;AACD,OARH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAYE;AAAO,MAAA,SAAS,EAAC,kBAAjB;AAAoC,MAAA,OAAO,EAAC,OAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADF,EAEG,KAAKvD,KAAL,CAAWM,cAAX,CAA0BkD,KAF7B,CAZF,CAzBF,EA0CE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MA1CF,EA2CE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBA3CF,EA4CG,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,EAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,EAAsBC,GAAtB,CAA2BC,aAAD,IAAmB;AAC5C,aACE;AACE,QAAA,GAAG,EAAEA,aADP;AAEE,QAAA,SAAS,EAAC,+BAFZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAIE;AACE,QAAA,SAAS,EAAC,kBADZ;AAEE,QAAA,IAAI,EAAC,UAFP;AAGE,QAAA,EAAE,eAAQA,aAAR,CAHJ;AAIE,QAAA,IAAI,aAAMA,aAAN,CAJN;AAKE,QAAA,OAAO,EACL,KAAK1D,KAAL,CAAWM,cAAX,YAA8BoD,aAA9B,KACI,SADJ,GAEI,EARR;AAUE,QAAA,QAAQ,EAAGJ,CAAD,IAAO;AACf,eAAKb,YAAL,CAAkBa,CAAC,CAACC,aAApB,EAAmC,IAAnC;AACD,SAZH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAJF,EAkBE;AAAO,QAAA,SAAS,EAAC,kBAAjB;AAAoC,QAAA,OAAO,EAAC,IAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACWG,aADX,CAlBF,CADF;AAwBD,KAzBA,CA5CH,EAsEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAtEF,CADF,CAFJ,CADF,CARF,EAwFE,oBAAC,KAAD,CAAO,MAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,MAAD;AAAQ,MAAA,OAAO,EAAC,WAAhB;AAA4B,MAAA,OAAO,EAAE,KAAKrB,sBAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADF,EAIE,oBAAC,MAAD;AAAQ,MAAA,OAAO,EAAC,WAAhB;AAA4B,MAAA,OAAO,EAAE,KAAKA,sBAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAJF,CAxFF,CAnDF,EAoJE,oBAAC,KAAD;AAAO,MAAA,IAAI,EAAE,KAAKrC,KAAL,CAAW2D,qBAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,KAAD,CAAO,MAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,GADH,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAFF,CADF,EAKE,oBAAC,KAAD,CAAO,IAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BADF,CALF,EAQE,oBAAC,KAAD,CAAO,MAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,MAAD;AACE,MAAA,OAAO,EAAC,WADV;AAEE,MAAA,OAAO,EAAGL,CAAD,IAAO;AACd,aAAK1B,QAAL,CAAc;AAAE+B,UAAAA,qBAAqB,EAAE;AAAzB,SAAd;AACD,OAJH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADF,EASE,oBAAC,MAAD;AACE,MAAA,OAAO,EAAC,SADV;AAEE,MAAA,OAAO,EAAGL,CAAD,IAAO;AACd,aAAK1B,QAAL,CAAc;AAAE+B,UAAAA,qBAAqB,EAAE;AAAzB,SAAd;AACA,aAAKC,aAAL;AACD,OALH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBATF,CARF,CApJF,CADF,CADF;AAqLD;;AAzQ2C","sourcesContent":["import React, { Component } from \"react\";\r\nimport { Modal, Button } from \"react-bootstrap\";\r\nimport Navbar from \"./common/Navbar\";\r\nimport axios from \"axios\";\r\nimport UserTable from \"./userTable\";\r\nimport UserForm from \"./userForm\";\r\nimport UnconfirmedModalBody from \"./unconfiremdModalBody\";\r\nimport config from \"../config.json\";\r\nexport class RicercaClienti extends Component {\r\n  state = {\r\n    modalDetailsVisible: false,\r\n    modalDetailsUncofirmed: false,\r\n    modalAlreadyConfirmed: false,\r\n    modalUnconfirmed: false,\r\n    clients: [],\r\n    selectedClient: null,\r\n    checked: false,\r\n    filiali: [],\r\n  };\r\n\r\n  handleRicerca = (data) => {\r\n    const jwt = localStorage.getItem(\"TOKEN\");\r\n    const conf = {\r\n      headers: {\r\n        Authorization: \"Bearer \" + jwt,\r\n      },\r\n      params: data,\r\n    };\r\n    axios\r\n      .get(config.apiClienteEndpoint, conf)\r\n      .then((response) => {\r\n        var date = new Date(response.data[0].filiali.lastModify);\r\n        response.data[0].filiali.lastModify =\r\n          date.getFullYear() +\r\n          \"-\" +\r\n          (date.getMonth() + 1) +\r\n          \"-\" +\r\n          date.getDate();\r\n        //da togliere stati duplicati\r\n        this.setState({ clients: [] });\r\n        this.setState({ clients: response.data });\r\n        console.log(this.state.clients);\r\n      })\r\n      .catch((error) => {\r\n        // handle error\r\n        console.log(error);\r\n      });\r\n  };\r\n\r\n  handleModalDetailsUncofirmed = () => {\r\n    this.setState({\r\n      modalDetailsUncofirmed: !this.state.modalDetailsUncofirmed,\r\n    });\r\n  };\r\n\r\n  handleDetailsModalVisible = () => {\r\n    this.setState({ modalDetailsVisible: !this.state.modalDetailsVisible });\r\n  };\r\n\r\n  handleUnconfirmed = () => {\r\n    this.setState({ modalAlreadyConfirmed: this.state.modalAlreadyConfirmed });\r\n  };\r\n\r\n  handleModalAlreadyConfirmed = () => {\r\n    this.setState({ modalAlreadyConfirmed: !this.state.modalAlreadyConfirmed });\r\n  };\r\n\r\n  handleModalUnconfirmed = () => {\r\n    this.setState({ modalUnconfirmed: !this.state.modalUnconfirmed });\r\n  };\r\n\r\n  checkClient = (client) => {\r\n    this.setState({ selectedClient: client });\r\n    if (client.confermato) {\r\n      this.setState({ modalAlreadyConfirmed: true });\r\n    } else {\r\n      this.setState({ modalUnconfirmed: true });\r\n    }\r\n  };\r\n\r\n  handleChange = (input, isCheckbox) => {\r\n    const client = { ...this.state.selectedClient };\r\n    console.log(input.name);\r\n    if (isCheckbox) {\r\n      client[input.name] = input.checked;\r\n    } else {\r\n      client[input.name] = input.value;\r\n    }\r\n    console.log(client);\r\n    this.setState({ selectedClient: client });\r\n  };\r\n  render() {\r\n    return (\r\n      <>\r\n        <div id=\"main\">\r\n          <Navbar></Navbar>\r\n          <h3 className=\" mt-2\">RICERCA CLIENTI</h3>\r\n          <UserForm handleRicerca={this.handleRicerca} />\r\n\r\n          {this.state.clients.length > 0 && (\r\n            <div className=\"row\">\r\n              <UserTable\r\n                checkClient={this.checkClient}\r\n                clients={this.state.clients}\r\n              />\r\n            </div>\r\n          )}\r\n\r\n          <Modal\r\n            show={this.state.modalAlreadyConfirmed}\r\n            onHide={this.handleModalAlreadyConfirmed}\r\n          >\r\n            <Modal.Header>\r\n              {\" \"}\r\n              <h3>Attenzione!</h3>\r\n            </Modal.Header>\r\n            <Modal.Body>\r\n              <p>\r\n                L'anagrafica del cliente è già stata confermata in data:\r\n                <b>\r\n                  {this.state.selectedClient &&\r\n                    this.state.selectedClient.filiali.lastModify}\r\n                </b>\r\n              </p>\r\n              <p>\r\n                Il codice identificativo assegnato è:\r\n                <b>\r\n                  {\" \"}\r\n                  {this.state.selectedClient &&\r\n                    this.state.selectedClient.codice}\r\n                </b>\r\n              </p>\r\n            </Modal.Body>\r\n            <Modal.Footer>\r\n              <Button\r\n                variant=\"secondary\"\r\n                onClick={this.handleModalAlreadyConfirmed}\r\n              >\r\n                Close\r\n              </Button>\r\n            </Modal.Footer>\r\n          </Modal>\r\n\r\n          {/*unconfirmed*/}\r\n\r\n          <Modal\r\n            show={this.state.modalUnconfirmed}\r\n            onHide={this.handleModalUnconfirmed}\r\n          >\r\n            <Modal.Header>\r\n              {\" \"}\r\n              <h3>Non Confermato!</h3>\r\n            </Modal.Header>\r\n            <Modal.Body>\r\n              <div className=\"row\">\r\n                {this.state.selectedClient && (\r\n                  <form action={this.handleSubmit}>\r\n                    <div className=\"container-fluid\">\r\n                      <h5>NAG</h5>\r\n                      <p>{this.state.selectedClient.nag}</p>\r\n                      <h5>Nome di battesimo</h5>\r\n                      <p> {this.state.selectedClient.nome}</p>\r\n                      <h5>Data di nascita</h5>\r\n                      <p> {this.state.selectedClient.dataNascita}</p>\r\n\r\n                      <div className=\"form-check form-check-wrapper\">\r\n                        <input\r\n                          className=\"form-check-input \"\r\n                          type=\"text\"\r\n                          value={this.state.selectedClient.telefono}\r\n                          id=\"telefono\"\r\n                          name=\"telefono\"\r\n                          onChange={(e) => {\r\n                            this.handleChange(e.currentTarget);\r\n                          }}\r\n                        />\r\n                        <label className=\"form-check-label\" htmlFor=\"telefono\">\r\n                          <h5>Numero di telefono</h5>\r\n                          {this.state.selectedClient.telefono}\r\n                        </label>\r\n                      </div>\r\n                      <br />\r\n                      <div className=\"form-check form-check-wrapper\">\r\n                        <input\r\n                          className=\"form-check-input\"\r\n                          type=\"email\"\r\n                          value={this.state.selectedClient.email}\r\n                          id=\"email\"\r\n                          name=\"email\"\r\n                          onChange={(e) => {\r\n                            this.handleChange(e.currentTarget);\r\n                          }}\r\n                        />\r\n\r\n                        <label className=\"form-check-label\" htmlFor=\"email\">\r\n                          <h5>Email</h5>\r\n                          {this.state.selectedClient.email}\r\n                        </label>\r\n                      </div>\r\n                      <br />\r\n                      <h5>Privacy</h5>\r\n                      {[1, 2, 3, 4, 5, 6, 7].map((privacyNumber) => {\r\n                        return (\r\n                          <div\r\n                            key={privacyNumber}\r\n                            className=\"form-check form-check-wrapper\"\r\n                          >\r\n                            <input\r\n                              className=\"form-check-input\"\r\n                              type=\"checkbox\"\r\n                              id={`id-${privacyNumber}`}\r\n                              name={`p${privacyNumber}`}\r\n                              checked={\r\n                                this.state.selectedClient[`p${privacyNumber}`]\r\n                                  ? \"checked\"\r\n                                  : \"\"\r\n                              }\r\n                              onChange={(e) => {\r\n                                this.handleChange(e.currentTarget, true);\r\n                              }}\r\n                            />\r\n                            <label className=\"form-check-label\" htmlFor=\"p1\">\r\n                              Privacy {privacyNumber}\r\n                            </label>\r\n                          </div>\r\n                        );\r\n                      })}\r\n                      <br />\r\n                    </div>\r\n                  </form>\r\n                )}\r\n              </div>\r\n            </Modal.Body>\r\n            <Modal.Footer>\r\n              <Button variant=\"secondary\" onClick={this.handleModalUnconfirmed}>\r\n                Close\r\n              </Button>\r\n              <Button variant=\"secondary\" onClick={this.handleModalUnconfirmed}>\r\n                Conferma\r\n              </Button>\r\n            </Modal.Footer>\r\n          </Modal>\r\n          <Modal show={this.state.confirmCheckModalShow}>\r\n            <Modal.Header>\r\n              {\" \"}\r\n              <h3>Non Confermato!</h3>\r\n            </Modal.Header>\r\n            <Modal.Body>\r\n              <div className=\"row\">Sicuro di confermare?</div>\r\n            </Modal.Body>\r\n            <Modal.Footer>\r\n              <Button\r\n                variant=\"secondary\"\r\n                onClick={(e) => {\r\n                  this.setState({ confirmCheckModalShow: false });\r\n                }}\r\n              >\r\n                Close\r\n              </Button>\r\n              <Button\r\n                variant=\"primary\"\r\n                onClick={(e) => {\r\n                  this.setState({ confirmCheckModalShow: false });\r\n                  this.handleConfirm();\r\n                }}\r\n              >\r\n                Conferma\r\n              </Button>\r\n            </Modal.Footer>\r\n          </Modal>\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}